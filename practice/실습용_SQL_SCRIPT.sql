CREATE DATABASE IF NOT EXISTS chun_university;

USE chun_university;

-- 학과 테이블
CREATE TABLE DEPARTMENT (
    DEPARTMENT_NO VARCHAR(10) PRIMARY KEY,
    DEPARTMENT_NAME VARCHAR(255) NOT NULL,
    CATEGORY VARCHAR(255),
    OPEN_YN CHAR(1),
    CAPACITY INT
);

-- 학생 테이블
CREATE TABLE STUDENT (
    STUDENT_NO VARCHAR(10) PRIMARY KEY,
    DEPARTMENT_NO VARCHAR(10),
    STUDENT_NAME VARCHAR(255) NOT NULL,
    STUDENT_SSN VARCHAR(14),
    STUDENT_ADDRESS VARCHAR(255),
    ENTRANCE_DATE DATE,
    ABSENCE_YN CHAR(1) DEFAULT 'N',
    COACH_PROFESSOR_NO VARCHAR(10),
    FOREIGN KEY (DEPARTMENT_NO) REFERENCES DEPARTMENT(DEPARTMENT_NO)
);

-- 교수 테이블
CREATE TABLE PROFESSOR (
    PROFESSOR_NO VARCHAR(10) PRIMARY KEY,
    PROFESSOR_NAME VARCHAR(255) NOT NULL,
    PROFESSOR_SSN VARCHAR(14),
    PROFESSOR_ADDRESS VARCHAR(255),
    DEPARTMENT_NO VARCHAR(10),
    FOREIGN KEY (DEPARTMENT_NO) REFERENCES DEPARTMENT(DEPARTMENT_NO)
);

-- 과목 테이블
CREATE TABLE CLASS (
    CLASS_NO VARCHAR(10) PRIMARY KEY,
    DEPARTMENT_NO VARCHAR(10),
    PREATTENDING_CLASS_NO VARCHAR(10),
    CLASS_NAME VARCHAR(255) NOT NULL,
    CLASS_TYPE VARCHAR(50),
    FOREIGN KEY (DEPARTMENT_NO) REFERENCES DEPARTMENT(DEPARTMENT_NO)
);

-- 성적 테이블
CREATE TABLE GRADE (
    TERM_NO VARCHAR(10),
    CLASS_NO VARCHAR(10),
    STUDENT_NO VARCHAR(10),
    POINT DECIMAL(3, 2),
    PRIMARY KEY (TERM_NO, CLASS_NO, STUDENT_NO),
    FOREIGN KEY (CLASS_NO) REFERENCES CLASS(CLASS_NO),
    FOREIGN KEY (STUDENT_NO) REFERENCES STUDENT(STUDENT_NO)
);

-- 과목-교수 테이블
CREATE TABLE CLASS_PROFESSOR (
    CLASS_NO VARCHAR(10),
    PROFESSOR_NO VARCHAR(10),
    PRIMARY KEY (CLASS_NO, PROFESSOR_NO),
    FOREIGN KEY (CLASS_NO) REFERENCES CLASS(CLASS_NO),
    FOREIGN KEY (PROFESSOR_NO) REFERENCES PROFESSOR(PROFESSOR_NO)
);

-- DEPARTMENT (학과)
INSERT INTO DEPARTMENT VALUES ('001', '국어국문학과', '인문사회', 'Y', 25);
INSERT INTO DEPARTMENT VALUES ('002', '영어영문학과', '인문사회', 'Y', 30);
INSERT INTO DEPARTMENT VALUES ('003', '법학과', '사회과학', 'Y', 40);
INSERT INTO DEPARTMENT VALUES ('004', '음악학과', '예체능', 'Y', 20);
INSERT INTO DEPARTMENT VALUES ('005', '환경조경학과', '자연과학', 'Y', 28);
INSERT INTO DEPARTMENT VALUES ('006', '서반아어학과', '인문사회', 'Y', 22);

-- PROFESSOR (교수)
INSERT INTO PROFESSOR VALUES ('P001', '김교수', '680404-1122334', '서울시 강남구', '001');
INSERT INTO PROFESSOR VALUES ('P002', '이교수', '720815-1234567', '경기도 수원시', '002');
INSERT INTO PROFESSOR VALUES ('P003', '박총장', '650320-1987654', '서울시 종로구', NULL);
INSERT INTO PROFESSOR VALUES ('P004', '최교수', '801130-2456789', '강원도 춘천시', '003');
INSERT INTO PROFESSOR VALUES ('P005', '정교수', '750505-1357913', '경기도 고양시', '003');
INSERT INTO PROFESSOR VALUES ('P006', '황보석', '740909-1234567', '서울시 서초구', '006');

-- STUDENT (학생)
INSERT INTO STUDENT VALUES ('A112113', '001', '김고운', '820101-2345678', '서울시 동작구', '2001-03-02', 'N', 'P001');
INSERT INTO STUDENT VALUES ('A313047', '006', '박수진', '840515-2121212', '경기도 부천시', '2003-03-01', 'N', 'P006');
INSERT INTO STUDENT VALUES ('A513079', '002', '이은주', '861002-2233445', '전주시 완산구', '2005-03-02', 'N', 'P002');
INSERT INTO STUDENT VALUES ('A513090', '004', '김음학', '861111-1111111', '서울시 강남구', '2005-03-02', 'N', NULL);
INSERT INTO STUDENT VALUES ('A513091', '005', '박환경', '861212-2222222', '경기도 안양시', '2005-03-02', 'Y', NULL);
INSERT INTO STUDENT VALUES ('A513110', '001', '최국문', '860101-1313131', '서울시 영등포구', '2005-03-02', 'N', 'P001');
INSERT INTO STUDENT VALUES ('A513119', '003', '이법학', '850202-1414141', '경기도 과천시', '2005-03-02', 'N', 'P004');
INSERT INTO STUDENT VALUES ('A517178', '005', '한아름', '860303-2525252', '강원도 원주시', '2005-03-02', 'N', NULL);
INSERT INTO STUDENT VALUES ('9912345', '003', '구시대', '800808-1678901', '강원도 강릉시', '1999-03-02', 'N', 'P005');
INSERT INTO STUDENT VALUES ('A002001', '001', '여학생', '810909-2123456', '전주시 덕진구', '2000-03-02', 'Y', 'P001');
INSERT INTO STUDENT VALUES ('A212345', '002', '신입생', '020303-3456789', '서울시 중구', '2022-03-02', 'N', 'P002');
INSERT INTO STUDENT VALUES ('A223456', '002', '김영어', '020404-4567890', '서울시 마포구', '2022-03-02', 'N', 'P002');
INSERT INTO STUDENT VALUES ('2002123', '001', '전주만', '830303-1234567', '전주시 덕진구', '2002-03-02', 'N', 'P001');
INSERT INTO STUDENT VALUES ('A313048', '006', '김서반', '840616-1122334', '서울시 강북구', '2003-03-01', 'N', 'P006');
INSERT INTO STUDENT VALUES ('A414141', '004', '최경희', '850717-2345678', '서울시 성북구', '2004-03-02', 'N', NULL);

-- CLASS (과목)
INSERT INTO CLASS VALUES ('C2123400', '001', NULL, '현대문학', '전공필수');
INSERT INTO CLASS VALUES ('C3118100', '003', NULL, '형법', '전공선택');
INSERT INTO CLASS VALUES ('C4455600', '004', NULL, '클래식의이해', '교양');
INSERT INTO CLASS VALUES ('C5123400', '005', 'C4455600', '도시생태학', '전공필수');
INSERT INTO CLASS VALUES ('C1234500', '006', NULL, '기초서반아어', '전공필수');
INSERT INTO CLASS VALUES ('C7891200', '002', NULL, '영미문학개론', '전공선택');
INSERT INTO CLASS VALUES ('C9876500', '003', NULL, '인간관계론', '교양');
INSERT INTO CLASS VALUES ('D1234500', '005', NULL, '조경사', '전공선택');

-- GRADE (성적)
INSERT INTO GRADE VALUES ('200501', 'C2123400', 'A513110', 3.5);
INSERT INTO GRADE VALUES ('200501', 'C3118100', 'A513119', 4.0);
INSERT INTO GRADE VALUES ('200402', 'C3118100', 'A513119', 3.0);
INSERT INTO GRADE VALUES ('200501', 'C4455600', 'A513090', 2.5);
INSERT INTO GRADE VALUES ('200502', 'C5123400', 'A517178', 4.5);
INSERT INTO GRADE VALUES ('200502', 'C5123400', 'A513091', 3.8);
INSERT INTO GRADE VALUES ('200701', 'C9876500', 'A313047', 4.2);
INSERT INTO GRADE VALUES ('200702', 'C9876500', 'A414141', 3.7);
INSERT INTO GRADE VALUES ('202201', 'C7891200', 'A212345', 3.9);
INSERT INTO GRADE VALUES ('200101', 'C2123400', 'A112113', 3.2);
INSERT INTO GRADE VALUES ('200102', 'C2123400', 'A112113', 4.1);
INSERT INTO GRADE VALUES ('200201', 'C2123400', 'A112113', 2.8);
INSERT INTO GRADE VALUES ('200501', 'D1234500', 'A517178', 4.0);

-- CLASS_PROFESSOR (과목-교수)
INSERT INTO CLASS_PROFESSOR VALUES ('C2123400', 'P001');
INSERT INTO CLASS_PROFESSOR VALUES ('C3118100', 'P004');
INSERT INTO CLASS_PROFESSOR VALUES ('C4455600', 'P005');
INSERT INTO CLASS_PROFESSOR VALUES ('C1234500', 'P006');
INSERT INTO CLASS_PROFESSOR VALUES ('C7891200', 'P002');
INSERT INTO CLASS_PROFESSOR VALUES ('C9876500', 'P003');